/*!
 * Weibo HTML5
 * (c) 2016 Weibo Company
 */
!function(e){function t(i){if(s[i])return s[i].exports;var a=s[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}({0:function(module,exports,__webpack_require__){function gobk(){with(window)this.opener&&(this.opener.focus(),this.close()),ISINCLIENT&&1==this.hashFlag&&/msie/i.test(navigator.userAgent)?this.external.notify("#BACKTOFIRSTPAGE#"):this.history.go(-1)}window.DELPOY&&__webpack_require__(7),window.hashFlag=1,function(){function e(){this.INTERFACE={REGISTER_LINK:"/regsubmitDeal/v5Reg",REGSENDSMS:"/regsubmitDeal/v5RegSendSms",SEND_EMAIL_LINK:"/regsubmitDeal/index",EMAIL_SKIP_PHONE_REGISTER:"/regsubmitDeal/v5RegUnActive",CHECK_EMAIL_UNIQUE_LINK:"/regsubmitDeal/emailAvailable",FETCH_VCODE_LINK:"/regsubmitDeal/index",SMS_FINISH_REGISTER:"/regsubmitDeal/index",IMG_VCODE_FETCH_LINK:"/reg/verifycode",IMG_VCODE_SHOW_LINK:"http://m.weibo.cn/reg/verifycode",EMAIL_RESEND:"/regsubmitDeal/v5RegResend"},this.REGEX={email:/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,pwd:/^[a-zA-Z0-9\.\_\-\?\~\!\@\#\$\%\^\&\*\\\+\`\=\[\]\(\)\{\}\|\;\'\:\"\,\/\<\>]{6,16}$/,vcode:/^[\d]{6}$/,phone:/^[\d]+$/,nickname:/[\u4e00-\u9fa5a-zA-Z0-9_\-]{2,24}/},this.rsa=new RSAKey,this.pkey="9EFA113A6C785D5976DDBCFFD7FCED2D2AF4A3A3C0AFB5442CD756754453DD7D6A6C663B51460371A90C50717919D37711F8824269675762AB3AAC0D8535178E58787A3B05A7420F9DBF38F9C55E5F20483574738F8A23C15C820532EA1A24C0CDCF718F6ECABBB95C90C5BF5DAA1DBF0354BA98BD891E948CC38AA432FCC7BB",this.rsa.setPublic(this.pkey,"10001"),this.tipTimeout=null,this.countryCode="0086",this.countryShort="CN",this.regPhone="",this.regEmail="",this.pwd="",this.nick="",this.idCheckList={sms:"sms_vcode_fetch",sms_vcode:"sms_finish_register",email:"email_register_now",email_vcode:"email_vcode_fetch",email_vcode_entry:"email_finish_register",email_resend:"email_resend_btn"}}function t(e){return document.querySelector(e)}function s(){window.removeEventListener("DOMContentLoaded",s,!1),"fsuccess"==window.ACT&&setTimeout(function(){m.triggerEvent("goto_back_url")},3e3);var i=new e;i.bindEvent();var a=window.location.hash.replace("#","");if(a)if("esuccess"==window.ACT||"fsuccess"==window.ACT)i.changeHash("");else if("mail"==a||"email"==a)i.switchNav("menu_email");else{var _=r[n]("sms");i.switchNav(_?"menu_sms":"menu_email")}else"esuccess"==window.ACT?m.showModule("email_success"):"fsuccess"==window.ACT&&m.showModule("sms_success");h.dataListener();var c=t(".code_error");t(".validate_code_box").addEventListener("keyup",function(e){c.innerText=""})}var r=document,n="getElementById",_="querySelectorAll",o="querySelector",l={SYSTEM_BUSY:"系统繁忙，请稍候再试！",VCODE_EMPTY_ERROR:"验证码不能为空",VCODE_FORMAT_ERROR:"验证码格式错误，请重新输入",IMGCODE_EMPTY_ERROR:"验证码不能为空",IMGCODE_FORMAT_ERROR:"验证码错误，请重新输入",EMAIL_EMPTY_ERROR:"邮箱不能为空！",EMAIL_FORMAT_ERROR:"邮箱格式错误，请重新输入",SINAEMAIL_FORMAT_ERROR:"新浪邮箱无需注册，请直接登录。",EMAIL_REGISTERED_ERROR:"邮箱已经注册过，请重新输入",MOBILE_EMPTY_ERROR:"手机号码不能为空",MOBILE_FORMAT_ERROR:"手机号码格式错误，请重新输入",PWD_EMPTY_ERROR:"密码不能为空",NICKNAME_EMPTY_ERROR:"昵称不能为空",MOBILE_PLACEHOLDER:"请输入手机号码",TW_MOBILE_PLACEHOLDER:"请输入9位手机号码",KR_MOBILE_PLACEHOLDER:"请输入10位手机号码",PWD_FORMAT_ERROR:"密码为6~16位数字或字母，区分大小写",NICKNAME_FORMAT_ERROR:"4-24位字符：支持中文、英文、数字、“-”",DEFAULT_VCODE_TEXT:"免费获取验证码",FETCHING_TEXT:"正在获取...",SENDING_TEXT:"正在发送...",SEND_EMAIL_TEXT:"发送激活邮件",REGISTER_NOW:"立即注册",SEND_EMAIL_SUCCESS_TEXT:"你的邮箱会收到一份邮件，激活帐号即可登录新浪微博，赶快去检查你的邮箱吧！",FETCH_AGAIN_INTERVAL_TEXT:"若未收到，请<!--120-->秒后再次获取",FETCH_AGAIN_TEXT:"再次获取验证码",FETCH_VCODE_TEXT:"获取验证码",AGREE_ALARM_TEXT:"请同意并勾选新浪网络使用协议。",HIDE_TEXT:"隐藏",SHOW_TEXT:"显示",VCODE_INTERVAL:120};if("zh_HK"==LANG||"zh_TW"==LANG){var l={SYSTEM_BUSY:"系統繁忙，請稍後再試 ",MSG_SEND_SUCCESS:"短訊發送成功，請注意查收",VCODE_EMPTY_ERROR:"驗證碼不能為空",VCODE_FORMAT_ERROR:"驗證碼格式錯誤，請重新輸入",IMGCODE_EMPTY_ERROR:"驗證碼不能為空",IMGCODE_FORMAT_ERROR:"驗證碼錯誤，請重新輸入",EMAIL_EMPTY_ERROR:" 電郵不能為空",EMAIL_FORMAT_ERROR:"電郵格式格式錯誤，請重新輸入",SINAEMAIL_FORMAT_ERROR:"使用新浪郵箱不需註冊，請直接登入。",EMAIL_REGISTERED_ERROR:"電郵已經註冊過，請重新輸入",MOBILE_EMPTY_ERROR:"手機號碼不能為空",MOBILE_PLACEHOLDER:"請輸入手機號碼",TW_MOBILE_PLACEHOLDER:"請輸入9位手機號碼",KR_MOBILE_PLACEHOLDER:"請輸入10位手機號碼",MOBILE_FORMAT_ERROR:"手機號碼格式錯誤，請重新輸入",PWD_EMPTY_ERROR:"密碼不能為空",NICKNAME_EMPTY_ERROR:"暱稱不能為空",PWD_FORMAT_ERROR:"密碼為6~16位數字或字母，區分大小寫",NICKNAME_FORMAT_ERROR:"4-24位字符：支持中文，英文，數字，“ - ”",DEFAULT_VCODE_TEXT:"免費獲取驗證碼",FETCHING_TEXT:"正在獲取...",SENDING_TEXT:"正在發送...",SEND_EMAIL_TEXT:"發送激活郵件",REGISTER_NOW:"立即註冊",SEND_EMAIL_SUCCESS_TEXT:"你的電郵會收到一份郵件，激活帳號即可登入新浪微博，趕快去檢查你的電郵吧！",FETCH_AGAIN_INTERVAL_TEXT:"若未收到，請<!--120-->秒後再次獲取",FETCH_AGAIN_TEXT:"再次獲取驗證碼",FETCH_VCODE_TEXT:"獲取驗證碼",AGREE_ALARM_TEXT:"請同意并勾選新浪網路使用協議。",HIDE_TEXT:"隱藏",SHOW_TEXT:"顯示",VCODE_INTERVAL:120};"zh_TW"==LANG&&(l.MSG_SEND_SUCCESS="簡訊發送成功，請注意查收",l.EMAIL_EMPTY_ERROR="信箱不能為空",l.EMAIL_FORMAT_ERROR="信箱格式格式錯誤，請重新輸入",l.SINAEMAIL_FORMAT_ERROR="使用新浪郵箱不需註冊，請直接登入。",l.EMAIL_REGISTERED_ERROR="電郵已經註冊過，請重新輸入",l.SEND_EMAIL_SUCCESS_TEXT="你的信箱會收到一份郵件，激活帳號即可登入新浪微博，趕快去檢查你的信箱吧！",l.REGISTER_NOW="立即註冊")}else if("en_US"==LANG)var l={SYSTEM_BUSY:"System is busy, please try again later!",VCODE_EMPTY_ERROR:"The verification code can't be empty",VCODE_FORMAT_ERROR:"The verification code is wrong,please re-enter",IMGCODE_EMPTY_ERROR:"The verification code can't be empty",IMGCODE_FORMAT_ERROR:"The verification code is wrong,please re-enter",EMAIL_EMPTY_ERROR:"The email can't be empty",EMAIL_FORMAT_ERROR:"The email is wrong,please re-enter",SINAEMAIL_FORMAT_ERROR:"You can login weibo simply with your sina-mail account.",EMAIL_REGISTERED_ERROR:"E-mail has been registered,please re-enter",MOBILE_EMPTY_ERROR:"The mobile number can't be empty",MOBILE_FORMAT_ERROR:"The mobile number is wrong,please re-enter",PWD_EMPTY_ERROR:"The password can't be empty",NICKNAME_EMPTY_ERROR:"The nick can't be empty",MOBILE_PLACEHOLDER:"Enter your mobile number ",TW_MOBILE_PLACEHOLDER:"Enter your 9-digit phone number ",KR_MOBILE_PLACEHOLDER:"Enter your 10-digit phone number ",PWD_FORMAT_ERROR:"The password should be 6-16 numbers or letters,case sensitive",NICKNAME_FORMAT_ERROR:'4-24 characters, letters, numbers or "-"',DEFAULT_VCODE_TEXT:"Get Verification Code for Free",FETCHING_TEXT:"Getting...",SENDING_TEXT:"Sending...",SEND_EMAIL_TEXT:"Send Activation Email",REGISTER_NOW:"Register now",SEND_EMAIL_SUCCESS_TEXT:"Your e-mail address will receive an e-mail to activate the account, you can log in Sina Weibo to check your e-mail address！",FETCH_AGAIN_INTERVAL_TEXT:"If not received,please try again <!--120--> seconds later",FETCH_AGAIN_TEXT:"Get Verification Code Again",FETCH_VCODE_TEXT:"Get Verification Code",AGREE_ALARM_TEXT:"Please read and agree the User Agreement。",HIDE_TEXT:"Hide",SHOW_TEXT:"Show",VCODE_INTERVAL:120};var h={loadedTime:new Date,startTime:0,smsUsernameFoucsTime:0,smsUsernameBlurTime:0,smsPwdFoucsTime:0,smsPwdBlurTime:0,emailLoginnameFoucsTime:0,emailLoginnameBlurTime:0,emailPwdFoucsTime:0,emailPwdBlurTime:0,emailNickFoucsTime:0,emailNickBlurTime:0,endTime:0,endPageX:0,endPageY:0,result_s:{sms_username_start_time:0,sms_username_input_time:0,sms_username_click_x:0,sms_username_click_y:0,sms_username_click_time:0,sms_username:0,sms_username_length:0,sms_pwd_start_time:0,sms_pwd_input_time:0,sms_pwd_click_x:0,sms_pwd_click_y:0,sms_pwd_click_time:0,sms_pwd_length:0,sms_reg_btn_x:0,sms_reg_btn_y:0,sms_reg_btn_click_time:0,sms_total_time:0,sms_submit_count:0,sms_click_count:0},result_e:{lname_s_t:0,lname_i_t:0,lname_c_x:0,lname_c_y:0,lname_c_t:0,lname:0,lname_l:0,pwd_s_t:0,pwd_i_t:0,pwd_c_x:0,pwd_c_y:0,pwd_c_t:0,pwd_l:0,nick_s_t:0,nick_i_t:0,nick_c_x:0,nick_c_y:0,nick_c_t:0,nick:0,nick_l:0,reg_btn_x:0,reg_btn_y:0,reg_btn_c_t:0,total_time:0,submit_count:0,click_count:0},handleEvent:function(e){var t=e.type;switch(t){case"touchstart":this.start(e);break;case"touchend":this.end(e);break;case"focus":this.focus(e);break;case"blur":this.blur(e)}},start:function(e){var t=e.target,s=t.getAttribute("id");switch(this.startTime=new Date,s){case"sms_phone_input":0==this.result_s.sms_username_start_time&&(this.result_s.sms_username_start_time=this.startTime-this.loadedTime);break;case"sms_pwd_input":0==this.result_s.sms_pwd_start_time&&(this.result_s.sms_pwd_start_time=this.startTime-this.loadedTime);break;case"email_input":0==this.result_e.lname_s_t&&(this.result_e.lname_s_t=this.startTime-this.loadedTime);break;case"email_pwd_input":0==this.result_e.pwd_s_t&&(this.result_e.pwd_s_t=this.startTime-this.loadedTime);break;case"email_nick_input":0==this.result_e.nick_s_t&&(this.result_e.nick_s_t=this.startTime-this.loadedTime)}},end:function(e){var t=e.target,s=t.getAttribute("id");this.endTime=new Date,this.endPageX=e.changedTouches[0].pageX,this.endPageY=e.changedTouches[0].pageY;var i=t.getBoundingClientRect().left,a=t.getBoundingClientRect().top;switch(s){case"sms_phone_input":this.result_s.sms_username_click_time=this.endTime-this.startTime,this.result_s.sms_username_click_x=this.endPageX-i,this.result_s.sms_username_click_y=this.endPageY-a;break;case"sms_pwd_input":this.result_s.sms_pwd_click_time=this.endTime-this.startTime,this.result_s.sms_pwd_click_x=this.endPageX-i,this.result_s.sms_pwd_click_y=this.endPageY-a;break;case"sms_vcode_fetch":0==this.result_s.sms_total_time&&(this.result_s.sms_total_time=this.endTime-this.loadedTime),this.result_s.sms_submit_count++;break;case"email_input":this.result_e.lname_c_t=this.endTime-this.startTime,this.result_e.lname_c_x=this.endPageX-i,this.result_e.lname_c_y=this.endPageY-a;break;case"email_pwd_input":this.result_e.pwd_c_t=this.endTime-this.startTime,this.result_e.pwd_c_x=this.endPageX-i,this.result_e.pwd_c_y=this.endPageY-a;break;case"email_nick_input":this.result_e.nick_c_t=this.endTime-this.startTime,this.result_e.nick_c_x=this.endPageX-i,this.result_e.nick_c_y=this.endPageY-a;break;case"email_register_now":this.result_e.reg_btn_c_t=this.endTime-this.startTime,0==this.result_e.total_time&&(this.result_e.total_time=this.endTime-this.loadedTime),this.result_e.submit_count++,this.result_e.reg_btn_x=this.endPageX-i,this.result_e.reg_btn_y=this.endPageY-a}this.result_e.click_count++},focus:function(e){var t=e.target,s=t.getAttribute("id");switch(s){case"sms_phone_input":this.smsUsernameFoucsTime=new Date;break;case"sms_pwd_input":this.smsPwdFoucsTime=new Date;break;case"email_input":this.emailLoginnameFoucsTime=new Date;break;case"email_pwd_input":this.emailPwdFoucsTime=new Date;break;case"email_nick_input":this.emailNickFoucsTime=new Date}},blur:function(e){var t=e.target,s=t.getAttribute("id");switch(s){case"sms_phone_input":this.smsUsernameBlurTime=new Date,0==this.result_s.sms_username_input_time&&(this.result_s.sms_username_input_time=this.smsUsernameBlurTime-this.smsUsernameFoucsTime),this.result_s.sms_username_length=t.value.length;break;case"sms_pwd_input":this.smsPwdBlurTime=new Date,0==this.result_s.sms_pwd_input_time&&(this.result_s.sms_pwd_input_time=this.smsPwdBlurTime-this.smsPwdFoucsTime),this.result_s.sms_pwd_length=t.value.length;break;case"email_input":this.emailLoginnameBlurTime=new Date,0==this.result_e.lname_i_t&&(this.result_e.lname_i_t=this.emailLoginnameBlurTime-this.emailLoginnameFoucsTime),this.result_e.lname=t.value,this.result_e.lname_l=t.value.length;break;case"email_pwd_input":this.emailPwdBlurTime=new Date,0==this.result_e.pwd_i_t&&(this.result_e.pwd_i_t=this.emailPwdBlurTime-this.emailPwdFoucsTime),this.result_e.pwd_l=t.value.length;break;case"email_nick_input":this.emailNickBlurTime=new Date,0==this.result_e.nick_i_t&&(this.result_e.nick_i_t=this.emailNickBlurTime-this.emailNickFoucsTime),this.result_e.nick=t.value,this.result_e.nick_l=t.value.length}},dataListener:function(){var e=r[n]("email"),t=r[n]("email_input"),s=r[n]("email_pwd_input"),i=r[n]("email_nick_input");e&&(e.addEventListener("touchstart",this,!1),e.addEventListener("touchend",this,!1)),t&&(t.addEventListener("focus",this,!1),t.addEventListener("blur",this,!1)),s&&(s.addEventListener("focus",this,!1),s.addEventListener("blur",this,!1)),i&&(i.addEventListener("focus",this,!1),i.addEventListener("blur",this,!1))}},u={genToken:function(e){var t=this;return e=t.sp(e,2,6)+t.sp(e,8,12),this.calcMD5(e)},hex_chr:"0123456789abcdef",calcMD5:function(e){var t=this,s=t.str2blks_MD5(e);for(a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<s.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=t.ff(a,b,c,d,s[i+0],7,-680876936),d=t.ff(d,a,b,c,s[i+1],12,-389564586),c=t.ff(c,d,a,b,s[i+2],17,606105819),b=t.ff(b,c,d,a,s[i+3],22,-1044525330),a=t.ff(a,b,c,d,s[i+4],7,-176418897),d=t.ff(d,a,b,c,s[i+5],12,1200080426),c=t.ff(c,d,a,b,s[i+6],17,-1473231341),b=t.ff(b,c,d,a,s[i+7],22,-45705983),a=t.ff(a,b,c,d,s[i+8],7,1770035416),d=t.ff(d,a,b,c,s[i+9],12,-1958414417),c=t.ff(c,d,a,b,s[i+10],17,-42063),b=t.ff(b,c,d,a,s[i+11],22,-1990404162),a=t.ff(a,b,c,d,s[i+12],7,1804603682),d=t.ff(d,a,b,c,s[i+13],12,-40341101),c=t.ff(c,d,a,b,s[i+14],17,-1502002290),b=t.ff(b,c,d,a,s[i+15],22,1236535329),a=t.gg(a,b,c,d,s[i+1],5,-165796510),d=t.gg(d,a,b,c,s[i+6],9,-1069501632),c=t.gg(c,d,a,b,s[i+11],14,643717713),b=t.gg(b,c,d,a,s[i+0],20,-373897302),a=t.gg(a,b,c,d,s[i+5],5,-701558691),d=t.gg(d,a,b,c,s[i+10],9,38016083),c=t.gg(c,d,a,b,s[i+15],14,-660478335),b=t.gg(b,c,d,a,s[i+4],20,-405537848),a=t.gg(a,b,c,d,s[i+9],5,568446438),d=t.gg(d,a,b,c,s[i+14],9,-1019803690),c=t.gg(c,d,a,b,s[i+3],14,-187363961),b=t.gg(b,c,d,a,s[i+8],20,1163531501),a=t.gg(a,b,c,d,s[i+13],5,-1444681467),d=t.gg(d,a,b,c,s[i+2],9,-51403784),c=t.gg(c,d,a,b,s[i+7],14,1735328473),b=t.gg(b,c,d,a,s[i+12],20,-1926607734),a=t.hh(a,b,c,d,s[i+5],4,-378558),d=t.hh(d,a,b,c,s[i+8],11,-2022574463),c=t.hh(c,d,a,b,s[i+11],16,1839030562),b=t.hh(b,c,d,a,s[i+14],23,-35309556),a=t.hh(a,b,c,d,s[i+1],4,-1530992060),d=t.hh(d,a,b,c,s[i+4],11,1272893353),c=t.hh(c,d,a,b,s[i+7],16,-155497632),b=t.hh(b,c,d,a,s[i+10],23,-1094730640),a=t.hh(a,b,c,d,s[i+13],4,681279174),d=t.hh(d,a,b,c,s[i+0],11,-358537222),c=t.hh(c,d,a,b,s[i+3],16,-722521979),b=t.hh(b,c,d,a,s[i+6],23,76029189),a=t.hh(a,b,c,d,s[i+9],4,-640364487),d=t.hh(d,a,b,c,s[i+12],11,-421815835),c=t.hh(c,d,a,b,s[i+15],16,530742520),b=t.hh(b,c,d,a,s[i+2],23,-995338651),a=t.ii(a,b,c,d,s[i+0],6,-198630844),d=t.ii(d,a,b,c,s[i+7],10,1126891415),c=t.ii(c,d,a,b,s[i+14],15,-1416354905),b=t.ii(b,c,d,a,s[i+5],21,-57434055),a=t.ii(a,b,c,d,s[i+12],6,1700485571),d=t.ii(d,a,b,c,s[i+3],10,-1894986606),c=t.ii(c,d,a,b,s[i+10],15,-1051523),b=t.ii(b,c,d,a,s[i+1],21,-2054922799),a=t.ii(a,b,c,d,s[i+8],6,1873313359),d=t.ii(d,a,b,c,s[i+15],10,-30611744),c=t.ii(c,d,a,b,s[i+6],15,-1560198380),b=t.ii(b,c,d,a,s[i+13],21,1309151649),a=t.ii(a,b,c,d,s[i+4],6,-145523070),d=t.ii(d,a,b,c,s[i+11],10,-1120210379),c=t.ii(c,d,a,b,s[i+2],15,718787259),b=t.ii(b,c,d,a,s[i+9],21,-343485551),a=t.add(a,olda),b=t.add(b,oldb),c=t.add(c,oldc),d=t.add(d,oldd);return t.rhex(a)+t.rhex(b)+t.rhex(c)+t.rhex(d)},rhex:function(e){var t=this,s="";for(j=0;j<=3;j++)s+=t.hex_chr.charAt(e>>8*j+4&15)+t.hex_chr.charAt(e>>8*j&15);return s},str2blks_MD5:function(e){var t=(e.length+8>>6)+1,s=new Array(16*t);for(i=0;i<16*t;i++)s[i]=0;for(i=0;i<e.length;i++)s[i>>2]|=e.charCodeAt(i)<<i%4*8;return s[i>>2]|=128<<i%4*8,s[16*t-2]=8*e.length,s},sp:function(e,t,s){return e.substring(t,s)},ff:function(e,t,s,i,a,r,n){var _=this;return _.cmn(t&s|~t&i,e,t,a,r,n)},gg:function(e,t,s,i,a,r,n){var _=this;return _.cmn(t&i|s&~i,e,t,a,r,n)},hh:function(e,t,s,i,a,r,n){var _=this;return _.cmn(t^s^i,e,t,a,r,n)},ii:function(e,t,s,i,a,r,n){var _=this;return _.cmn(s^(t|~i),e,t,a,r,n)},cmn:function(e,t,s,i,a,r){var n=this;return n.add(n.rol(n.add(n.add(t,e),n.add(i,r)),a),s)},add:function(e,t){var s=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(s>>16);return i<<16|65535&s},rol:function(e,t){return e<<t|e>>>32-t}},m={req:function(e){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(t&&e){var s=e.type?e.type.toLowerCase():"get";t.open(s,e.url,void 0==e.async||e.async),t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status){var s=t.responseText,i=s;if("json"==e.dataType)try{i=JSON.parse(s)}catch(e){i=null}e.success&&e.success.call(null,i)}else 400!=t.status&&500!=t.status||e.error&&e.error.call(null)},"post"==s&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("HTTP_X_REQUESTED_WITH","xmlhttprequest"),e.timeout&&setTimeout(function(){4!=t.readyState&&(t.abort(),e.error&&e.error.call(null))},e.timeout),t&&t.send("get"==s?null:e.data?e.data:null)}},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},addClass:function(e,t){if(e.classList)e.classList.add(t);else{var s=e.className,i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");i.test(s)||(e.className=s+" "+t)}},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else{var s=e.className,i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=s.replace(i," ").replace(/(^\s*)|(\s*$)/g,"")}},hasClass:function(e,t){if(e.classList)return e.classList.contains(t);var s=e.className,i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return i.test(s)},showModule:function(e){for(var t=r[_]("section"),s=0,i=t.length;s<i;s++)t[s].style.display="none";"string"==typeof e&&(e=r[n](e)),e.style.display="block"},triggerEvent:function(e){if("string"==typeof e&&(e=r[n](e)),e.fireEvent)e.fireEvent("onclick");else{var t=r.createEvent("MouseEvent");t.initEvent("click",!0,!0),e.dispatchEvent(t)}}},E={_regex:/^[a-zA-Z0-9\.\_\-\?\~\!\@\#\$\%\^\&\*\\\+\`\=\[\]\(\)\{\}\|\;\'\:\"\,\/\<\>]{6,16}$/,_orderStr:function(e,t){if(!e||!t)throw"orderStr error!";"string"!=typeof e&&(e+=""),"string"!=typeof t&&(t+="");var s=e.charCodeAt(0),i=t.charCodeAt(0),a=s>i;if(a){var r=s;s=i,i=r}for(var n=[],_=s;_<=i;_++)n.push(String.fromCharCode(_));return a&&n.reverse(),n.join("")},_isOrder:function(e,t){return e&&e.length&&e.length>1&&function(){for(var s=0;s<t.length;s++)if(t[s].indexOf(e)>=0)return!0;return!1}()},_bLength:function(e){if(!e)return 0;var t=e.match(/[^\x00-\xff]/g);return e.length+(t?t.length:0)},_lenLimit:function(e,t,s){var i=this._bLength(e);return!(i<t||i>s)},_isWeakPasswd:function(e,t){if(/^(112233|123123|123321|123456|654321|abcdef|abcabc|abc123|a1b2c3|aaa111|123qwe|qwerty|qweasd|admin|password|p@ssword|passwd|iloveyou|5201314)$/.test(e))return!0;if(/^([a-zA-Z0-9])\1+$/.test(e))return!0;if(this._isOrder(e,t))return!0;if(/^([a-zA-Z]+)([0-9]+)$/.test(e)||/^([0-9]+)([a-zA-Z]+)$/.test(e)){var s=RegExp.$1,i=RegExp.$2;if(this._isOrder(s,t)&&this._isOrder(i,t))return!0}return!1},_isStrongPasswd:function(e){var t=e.match(/[a-z]/gi),s=e.match(/[0-9]/gi),i=e.match(/([^a-z0-9])/gi);return!!(t&&s&&i)||(t&&s?t.length+s.length>=11:t&&i?t.length+i.length>=11:!(!s||!i)&&s.length+i.length>=11)},_isWeird:function(e){return!/^[a-zA-Z0-9\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b\uFF01\u201c\u201d\u2018\u2019\u300e\u300f\u300c\u300d\uFF09\uFF08\.\_\-\?\~\!\@\#\$\%\^\&\*\\\+\`\=\[\]\(\)\{\}\|\;\'\:\"\,\/\<\>]+$/i.test(e)},check:function(e,t,s){var i=[this._orderStr("a","z"),this._orderStr("z","a"),this._orderStr("0","9"),this._orderStr("9","0")],t=t||6,s=s||16;return{isBase:this._regex.test(e),isInLength:this._lenLimit(e,t,s),isWeak:this._isWeakPasswd(e,i),isWeired:this._isWeird(e),isStrong:this._isStrongPasswd(e)}}};e.prototype={selectInit:function(){var e=function(e){var t=e.target||e.srcElement;if("select"===t.nodeName.toLowerCase()){var s=t.options[t.selectedIndex].text,i=t.options[t.selectedIndex].value,a=(t.options[t.selectedIndex].getAttribute("data-type"),t.previousElementSibling||t.previousSibling),r=a.previousElementSibling||a.previousSibling;a.innerHTML=s,r.innerHTML=i}};r[n]("body").addEventListener("change",e,!1)},togglePassword:function(e){var t=e.previousElementSibling||e.previousSibling,s=m.trim(t.value);s&&("password"==t.type?(t.setAttribute("type","text"),e.innerHTML=l.HIDE_TEXT):(t.setAttribute("type","password"),e.innerHTML=l.SHOW_TEXT))},getSection:function(e){for(;"section"!=e.nodeName.toLowerCase()||!m.hasClass(e,"main");){if("body"==e.nodeName.toLowerCase())return null;e=e.parentNode}return e},toggleNavOn:function(e){var t=r[n]("reg_menus");t&&(m.addClass(r[n](e),"on"),m.removeClass(r[n]("menu_sms"==e?"menu_email":"menu_sms"),"on"),m.hasClass(t,"hid")&&m.removeClass(t,"hid"))},switchNav:function(e){"menu_sms"==e?(window.submitType="sms",this.setCountryInfo(r[n]("sms_select_area"),"sms"),this.changeHash("sms")):(window.submitType="email",this.setCountryInfo(r[n]("email_select_area"),"email"),this.changeHash("email")),this.toggleNavOn(e)},setDisabled:function(e){for(var t=e[_]("input, select"),s=0,i=t.length;s<i;s++)t[s].setAttribute("disabled","disabled")},cancelDisabled:function(e){for(var t=e[_]("input, select"),s=0,i=t.length;s<i;s++)t[s].removeAttribute("disabled"),m.removeClass(t[s].parentNode,"input_dis")},showError:function(e,t){if("error_wraper"==e.getAttribute("id")){e[o]("#error_mes").innerHTML=t;var s=this;clearTimeout(this.tipTimeout),this.tipTimeout=setTimeout(function(){s.hideError(e)},3e3)}else e.innerHTML=t;e.style.display="block"},hideError:function(e){if(e)e.style.display="none";else for(var t=r[_](".hint_error,.input_error"),s=0,i=t.length;s<i;s++)t[s].style.display="none"},resendLoop:function(e,t,s,i){m.addClass(e,"locked");var a=e;a.innerHTML=s.replace("<!--120-->",t),t-=1;var r=this;clearInterval(this.interval),this.interval=setInterval(function(){0>=t?(clearInterval(r.interval),a.innerHTML=i,m.removeClass(e,"locked")):(a.innerHTML=s.replace("<!--120-->",t),t-=1)},1e3)},toggleCheckbox:function(e){m.hasClass(e,"on")?m.removeClass(e,"on"):m.addClass(e,"on")},checkPhone:function(e,t){var s=!0,i=new Number(""+t).valueOf(),a=e.length,r=e.substr(0,1),n=e.substr(0,2),_=e.substr(0,3);switch(i){case 86:(11!=a||"13"!=n&&"14"!=n&&"15"!=n&&"16"!=n&&"17"!=n&&"18"!=n&&"19"!=n)&&(s=!1);break;case 1:10!=a&&(s=!1);break;case 886:"0"==r&&(e=e.substring(1),a=e.length,r=e.substr(0,1)),9==a&&"9"==r||(s=!1);break;case 852:(8!=a||"5"!=r&&"6"!=r&&"9"!=r)&&(s=!1);break;case 853:8==a&&"6"==r||(s=!1);break;case 60:(9!=a&&10!=a||"1"!=r)&&(s=!1);break;case 61:9==a&&"4"==r||(s=!1);break;case 81:(10!=a||"70"!=n&&"80"!=n&&"90"!=n)&&(s=!1);break;case 82:(10!=a||"10"!=n&&"11"!=n&&"16"!=n&&"17"!=n&&"18"!=n&&"19"!=n)&&(s=!1);break;case 850:10==a&&"1"==r||(s=!1);break;case 65:(8!=a||"8"!=r&&"9"!=r)&&(s=!1);break;case 44:var c=e.substr(0,4);(10!=a||"74"!=n&&"75"!=n&&"7624"!=c&&"77"!=n&&"78"!=n&&"79"!=n)&&(s=!1);break;case 33:(9!=a||"6"!=r&&"73"!=n&&"74"!=n&&"75"!=n&&"76"!=n&&"77"!=n&&"78"!=n)&&(s=!1);break;case 7:(10!=a||"91"!=n&&"92"!=n&&"93"!=n&&"96"!=n&&"98"!=n&&"99"!=n&&"901"!=_&&"902"!=_&&"903"!=_&&"904"!=_&&"905"!=_&&"906"!=_&&"908"!=_&&"909"!=_&&"950"!=_&&"951"!=_&&"952"!=_&&"953"!=_)&&(s=!1);break;case 91:(10!=a||"7"!=r&&"8"!=r&&"9"!=r)&&(s=!1);break;case 66:"0"==r&&(e=e.substring(1),a=e.length,r=e.substr(0,1)),(9!=a||"8"!=r&&"9"!=r)&&(s=!1);break;case 49:(10!=a&&11!=a||"15"!=n&&"16"!=n&&"17"!=n)&&(s=!1)}return s},calLength:function(e){for(var t=0,s=0,i=e.length;s<i;s++)t+=255<e.charCodeAt(s)?2:1;return t},inputValidate:function(e){for(var t=!0,s=null,i=null,a=0,r=e.length,n=null,_="";a<r;a++)if(n=e[a],"hidden"!==n.type&&(_=n.getAttribute("validate"),val="pwd"==_?n.value:m.trim(n.value),s=n.parentNode,i=s.nextElementSibling||s.nextSibling,_)){if(!val){t=!1,this.showError(i,l[_.toUpperCase()+"_EMPTY_ERROR"]);break}if("mobile"===_){var c=this.countryCode;if(t=this.checkPhone(val,c),!t){this.showError(i,l[_.toUpperCase()+"_FORMAT_ERROR"]);break}}else if("email"===_){if(!this.REGEX[_].test(val)){t=!1,this.showError(i,l[_.toUpperCase()+"_FORMAT_ERROR"]);break}if(/(@sina\.com|@sina\.cn)$/.test(val)){t=!1,this.showError(i,l.SINAEMAIL_FORMAT_ERROR);break}}else if("nickname"==_){if(4>this.calLength(val)||this.REGEX[_]&&!this.REGEX[_].test(val)){t=!1,this.showError(i,l[_.toUpperCase()+"_FORMAT_ERROR"]);break}}else if("pwd"==_){var o=E.check(val);if(!o.isInLength){t=!1,this.showError(i,l[_.toUpperCase()+"_FORMAT_ERROR"]);break}}else if(this.REGEX[_]&&!this.REGEX[_].test(val)){t=!1,this.showError(i,l[_.toUpperCase()+"_FORMAT_ERROR"]);break}}return t},changeHash:function(e){window.location.hash!="#"+e?window.location.hash=e:m.showModule(e)},setCountryInfo:function(e,t){var s=e.value,i=r[n](t+"_show_code"),a=i.previousElementSibling||i.previousSibling,_=i.parentNode||i.parentElement;this.countryCode=s,this.countryShort=e.options[e.selectedIndex].getAttribute("data-type"),i.innerHTML=s,"0086"==s?(m.removeClass(_,"input_show_code"),a.setAttribute("placeholder",l.MOBILE_PLACEHOLDER)):(m.addClass(_,"input_show_code"),"00886"==s?a.setAttribute("placeholder",l.TW_MOBILE_PLACEHOLDER):"0082"==s?a.setAttribute("placeholder",l.KR_MOBILE_PLACEHOLDER):a.setAttribute("placeholder",l.MOBILE_PLACEHOLDER))},phoneTransform:function(e){e=m.trim(e);var t=e.substr(0,1);return encodeURIComponent(/00886|0066/.test(this.countryCode)?this.countryCode+("0"==t?e.substr(1):e):this.countryCode+e)},successFun:function(e,t){var s=t.getAttribute("id");switch(s){case"sms_vcode_fetch":r[n]("sms_confirm_mobile").innerHTML=this.regPhone=r[n]("sms_phone_input").value,this.resendLoop(r[n]("sms_fetch_again"),l.VCODE_INTERVAL,l.FETCH_AGAIN_INTERVAL_TEXT,l.FETCH_AGAIN_TEXT),e.resend&&r[n]("sms_fetch_again").setAttribute("resend",e.resend),this.changeHash("sms_vcode");break;case"sms_fetch_again":this.resendLoop(r[n]("sms_fetch_again"),l.VCODE_INTERVAL,l.FETCH_AGAIN_INTERVAL_TEXT,l.FETCH_AGAIN_TEXT),e.resend&&r[n]("sms_fetch_again").setAttribute("resend",e.resend);break;case"sms_finish_register":window.location.href="/reg/index?act=fsuccess&"+CLT;break;case"email_register_now":1==e.ok?window.location.href=e.redirectUrl:2==e.ok&&(this.countryCode="0086",this.countryShort="CN",r[n]("email_nick_input")&&(this.nick=m.trim(r[n]("email_nick_input").value)),this.changeHash("email_vcode"),0==e.isCanSmsVerify&&(r[n]("email_skip_phone").style.display="inline-block"));break;case"email_skip_phone":1==e.ok&&(window.location.href=e.redirectUrl);break;case"email_vcode_fetch":r[n]("email_confirm_mobile").innerHTML=this.regPhone=r[n]("email_phone_input").value,this.resendLoop(r[n]("email_fetch_again"),l.VCODE_INTERVAL,l.FETCH_AGAIN_INTERVAL_TEXT,l.FETCH_AGAIN_TEXT),this.changeHash("email_vcode_entry");break;case"email_finish_register":1==e.ok&&(window.location.href=e.redirectUrl);break;case"email_fetch_again":this.resendLoop(r[n]("email_fetch_again"),l.VCODE_INTERVAL,l.FETCH_AGAIN_INTERVAL_TEXT,l.FETCH_AGAIN_TEXT);break;case"change_code":r[n]("imgcode_show").src=this.INTERFACE.IMG_VCODE_FETCH_LINK+"?c="+e.data.cpt+"&entry=h5regv4",r[n]("hid_cpt").value=e.data.cpt;break;case"email_resend_btn":e.emailurl&&(window.location=e.emailurl);break;case"m_box_btn":phoneVal=window.location.href.search(/#email_vcode/)==-1?r[n]("sms_phone_input").value:r[n]("email_phone_input").value,r[n]("sms_confirm_mobile").innerHTML=this.regPhone=phoneVal,this.resendLoop(r[n]("sms_fetch_again"),l.VCODE_INTERVAL,l.FETCH_AGAIN_INTERVAL_TEXT,l.FETCH_AGAIN_TEXT),e.resend&&r[n]("sms_fetch_again").setAttribute("resend",e.resend),this.changeHash("sms_vcode")}},submitInterface:function(e,t,s,i,a){if(!m.hasClass(t,"disabled")&&!m.hasClass(t,"locked")){m.addClass(t,"disabled"),this.hideError();var c=this,d=this.getSection(t)||document,h=d[_]("input[name]"),u=r[n]("error_wraper"),E="";if(s&&!this.inputValidate(h,u))return void m.removeClass(t,"disabled");if(i){if("object"==typeof i)for(var T in i)E+="&"+T+"="+encodeURIComponent(i[T])}else{for(var b=0,g=h.length,R=null,f="";b<g;b++)R=h[b],f=R.getAttribute("name"),"pwd"==f?(this.pwd=this.rsa.encrypt(encodeURIComponent(R.value)),E+="&"+f+"="+this.pwd):E+="phone"==f?"&"+f+"="+this.rsa.encrypt(this.phoneTransform(R.value)):"smscode"==f?"&"+f+"="+this.rsa.encrypt(encodeURIComponent(R.value)):"&"+f+"="+encodeURIComponent(R.value);if("object"==typeof a)for(var T in a)E+="&"+T+"="+encodeURIComponent(a[T])}E+="&tRst="+(window.TOKEN||""),registerCache=E=(E+"&"+CLT).replace(/^&/,""),this.setDisabled(d),m.req({url:e,type:"post",dataType:"json",timeout:6e4,data:E,success:function(e){m.removeClass(t,"disabled"),0<e.ok?c.successFun(e,t):e.ok==-3?(m.addClass(r[n]("verify_code"),"show"),r[o](".validate_icon").src=e.data.capPic,capIdCache=e.data.capId):(c.showError(u,e.msg?e.msg:l.SYSTEM_BUSY),e&&e.cpt&&(r[n]("imgcode_show").src=c.INTERFACE.IMG_VCODE_SHOW_LINK+"?c="+e.cpt,r[n]("hid_cpt").value=e.cpt)),c.cancelDisabled(d)},error:function(){m.removeClass(t,"disabled"),c.cancelDisabled(d),c.showError(u,l.SYSTEM_BUSY)}})}},handleEvent:function(e){var t=e.type,s=e.target||e.srcElement,i=s.getAttribute?s.getAttribute("id"):null;if("click"===t){if(!i)return;switch(i){case"menu_sms":case"menu_email":this.switchNav(i);break;case"sms_toggle_type":case"email_toggle_type":this.togglePassword(s);break;case"sms_btn_agree":case"email_btn_agree":this.toggleCheckbox(s);break;case"sms_vcode_fetch":if(!m.hasClass(r[n]("sms_btn_agree"),"on"))return void this.showError(r[n]("error_wraper"),l.AGREE_ALARM_TEXT);this.submitInterface(this.INTERFACE.FETCH_VCODE_LINK,s,!0,null,null);break;case"sms_fetch_again":var a={act:"sendcode",resend:encodeURIComponent(m.trim(s.getAttribute("resend")))};this.submitInterface(this.INTERFACE.FETCH_VCODE_LINK,s,!1,a,null);break;case"sms_finish_register":var a={ztype:this.countryShort,phone:this.rsa.encrypt(this.phoneTransform(this.regPhone))};this.submitInterface(this.INTERFACE.SMS_FINISH_REGISTER,s,!0,null,a);break;case"email_register_now":if(!m.hasClass(r[n]("email_btn_agree"),"on"))return void this.showError(r[n]("error_wraper"),l.AGREE_ALARM_TEXT);this.regEmail=r[n]("email_input").value;var a={track:h.result_e?JSON.stringify(h.result_e):""};window.emailSms=a,this.submitInterface(this.INTERFACE.REGISTER_LINK,s,!0,null,a);break;case"email_vcode_fetch":var a={zone:this.countryCode};this.submitInterface(this.INTERFACE.REGSENDSMS,s,!0,null,a);break;case"email_skip_phone":var a={zone:this.countryCode,mobile:this.regPhone,email:this.regEmail,pwd:this.pwd,nick:this.nick,track:h.result_e?JSON.stringify(h.result_e):""};this.submitInterface(this.INTERFACE.EMAIL_SKIP_PHONE_REGISTER,s,!1,null,a);break;case"email_finish_register":var a={zone:this.countryCode,mobile:this.regPhone,email:this.regEmail,pwd:this.pwd,nick:this.nick,track:h.result_e?JSON.stringify(h.result_e):""};this.submitInterface(this.INTERFACE.REGISTER_LINK,s,!0,null,a);break;case"email_fetch_again":var a={zone:this.countryCode,mobile:this.regPhone};this.submitInterface(this.INTERFACE.REGSENDSMS,s,!1,a,null);break;case"error_wraper":case"error_mes":this.hideError(r[n]("error_wraper"));break;case"goto_email_resend":this.changeHash("email_resend");break;case"change_code":var a={act:"cpt",entry:"h5regv4",t:100*Math.random()};this.submitInterface(this.INTERFACE.IMG_VCODE_FETCH_LINK,s,!1,a,null);break;case"email_resend_btn":var a={token:u.genToken(r[n]("hid_cpt").value)};this.submitInterface(this.INTERFACE.EMAIL_RESEND,s,!0,null,a);break;case"validate_btn":m.req({url:"/regsubmitDeal/refreshCode",type:"post",dataType:"json",timeout:6e4,success:function(e){1==e.ok&&(capIdCache=e.data.capId,r[o](".validate_icon").src=e.data.capPic)}});break;case"m_box_btn":var _=this,c=registerCache||void 0,d=capIdCache||"",E=r[o](".validate_code_box").value,T=window.location.href.search(/#email_vcode/)==-1?"/regsubmitDeal/index":"/regsubmitDeal/v5RegSendSms",b=window.location.href.search(/#email_vcode/)==-1?document.getElementById("sms_vcode_fetch"):document.getElementById("email_vcode_fetch");if(c=c+"&code="+E+"&capId="+d,/^\s*$/.test(E))return void(r[o](".code_error").innerText="验证码不能为空");m.req({url:T,type:"post",dataType:"json",timeout:6e4,data:c,success:function(e){1==e.ok?(r[o](".code_error").innerText="",r[o](".validate_code_box").value="",m.removeClass(r[n]("verify_code"),"show"),_.successFun(e,b)):(r[o](".code_error").innerText=e.msg,m.req({url:"/regsubmitDeal/refreshCode",type:"post",dataType:"json",timeout:6e4,success:function(e){1==e.ok&&(capIdCache=e.data.capId,r[o](".validate_icon").src=e.data.capPic)}}))},error:function(){m.removeClass(b,"disabled"),_.cancelDisabled(section),_.showError(errorDom,l.SYSTEM_BUSY)}})}
}else if("change"===t){if(!i)return;switch(i){case"sms_select_area":this.setCountryInfo(s,"sms");break;case"email_select_area":this.setCountryInfo(s,"email")}}else if("touchstart"===t);else if("touchend"===t);else if("keypress"===t){if(13!=e.keyCode)return;var g=this.getSection(s).getAttribute("id"),R=this.idCheckList[g];R&&m.triggerEvent(R)}else if("hashchange"===t){var f=window.location.hash.replace("#","");if(f)if(m.showModule(f),"mail"==f||"email"==f)this.toggleNavOn("menu_email");else if("sms"==f)this.toggleNavOn("menu_sms");else{var p=r[n]("reg_menus");p&&m.addClass(p,"hid")}else if("esuccess"==window.ACT)m.showModule("email_success");else if("fsuccess"==window.ACT)m.showModule("sms_success");else{var A="mail"==window.ACT||"email"==window.ACT?"email":"sms";m.showModule(A),this.toggleNavOn("menu_"+A)}f&&"sms"!=f&&"email"!=f&&"mail"!=f?window.hashFlag=0:window.hashFlag=1}},bindEvent:function(){this.selectInit(),window.addEventListener("hashchange",this,!1);for(var e=r[n]("body"),t=["click","change","touchstart","touchend","keypress"],s=0,i=t.length;s<i;s++)e.addEventListener(t[s],this,!1)}},window.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("popstate",function(){m.removeClass(r[n]("verify_code"),"show"),r[o](".code_error").innerText="",r[o](".validate_code_box").value=""})}()},7:function(e,t){}});